# AegisSDK Developer Tools

å¿«é€Ÿåˆ›å»ºå’Œéƒ¨ç½²å¾®æœåŠ¡çš„å¼€å‘å·¥å…·åŒ…ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…
```bash
pip install aegis-sdk-dev
```

### 2. åˆ›å»ºæ–°é¡¹ç›®ï¼ˆ5ç§’ï¼‰
```bash
# ä½¿ç”¨å·²å®‰è£…çš„å‘½ä»¤
aegis-bootstrap --project-name my-service --template enterprise_ddd --output-dir ./

# æˆ–ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ä¾¿æ·è„šæœ¬
./aegis bootstrap --project-name my-service --template enterprise_ddd --output-dir ./
```

### 3. éƒ¨ç½²åˆ° Kubernetesï¼ˆ3åˆ†é’Ÿï¼‰
```bash
cd my-service
make deploy-to-kind  # è‡ªåŠ¨æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²
```

### 4. éªŒè¯
```bash
kubectl get pods -n aegis-trader
# my-service-xxxxx  1/1  Running  0  30s
```

## ğŸ“¦ ç”Ÿæˆçš„å®Œæ•´é¡¹ç›®ç»“æ„

```
my-service/
â”œâ”€â”€ domain/              # é¢†åŸŸå±‚ï¼ˆDDDæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ entities.py      # é¢†åŸŸå®ä½“
â”‚   â”œâ”€â”€ value_objects.py # å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ repositories.py  # ä»“å‚¨æ¥å£
â”‚   â”œâ”€â”€ services.py      # é¢†åŸŸæœåŠ¡
â”‚   â””â”€â”€ events.py        # é¢†åŸŸäº‹ä»¶
â”œâ”€â”€ application/         # åº”ç”¨å±‚ï¼ˆç”¨ä¾‹ç¼–æ’ï¼‰
â”‚   â”œâ”€â”€ commands.py      # CQRSå‘½ä»¤
â”‚   â”œâ”€â”€ queries.py       # CQRSæŸ¥è¯¢
â”‚   â”œâ”€â”€ handlers.py      # å‘½ä»¤/æŸ¥è¯¢å¤„ç†å™¨
â”‚   â””â”€â”€ dto.py          # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ infra/              # åŸºç¡€è®¾æ–½å±‚ï¼ˆæŠ€æœ¯å®ç°ï¼‰
â”‚   â”œâ”€â”€ adapters.py      # å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”œâ”€â”€ persistence.py   # æŒä¹…åŒ–å®ç°
â”‚   â”œâ”€â”€ messaging.py     # æ¶ˆæ¯å®ç°ï¼ˆNATSï¼‰
â”‚   â””â”€â”€ cache.py        # ç¼“å­˜å±‚
â”œâ”€â”€ crossdomain/        # é˜²è…å±‚
â”‚   â”œâ”€â”€ translators.py   # æ•°æ®è½¬æ¢å™¨
â”‚   â””â”€â”€ anti_corruption.py # é˜²è…å¤–è§‚
â”œâ”€â”€ app_types/          # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ dto.py          # å…±äº«DTO
â”‚   â”œâ”€â”€ interfaces.py   # æ¥å£å®šä¹‰
â”‚   â””â”€â”€ enums.py        # æšä¸¾ç±»å‹
â”œâ”€â”€ pkg/                # å·¥å…·åŒ…
â”‚   â”œâ”€â”€ utils.py        # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ validators.py   # éªŒè¯å™¨
â”‚   â””â”€â”€ helpers.py      # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ tests/              # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ unit/           # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ integration/    # é›†æˆæµ‹è¯•
â”œâ”€â”€ k8s/                # Kuberneteséƒ¨ç½²
â”‚   â”œâ”€â”€ templates/      # Helmæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”‚   â”œâ”€â”€ service.yaml
â”‚   â”‚   â”œâ”€â”€ configmap.yaml
â”‚   â”‚   â”œâ”€â”€ ingress.yaml
â”‚   â”‚   â”œâ”€â”€ serviceaccount.yaml
â”‚   â”‚   â””â”€â”€ _helpers.tpl
â”‚   â”œâ”€â”€ Chart.yaml      # Helm chartå…ƒæ•°æ®
â”‚   â”œâ”€â”€ values.yaml     # é»˜è®¤é…ç½®
â”‚   â”œâ”€â”€ values-dev.yaml # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ values-prod.yaml # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ main.py             # æœåŠ¡å…¥å£ï¼ˆå¼‚æ­¥æ¶æ„ï¼‰
â”œâ”€â”€ Makefile            # DevOpsè‡ªåŠ¨åŒ–å‘½ä»¤
â”œâ”€â”€ Dockerfile          # å¤šé˜¶æ®µæ„å»ºï¼ˆå«ä»£ç†ï¼‰
â”œâ”€â”€ docker-compose.yml  # æœ¬åœ°å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ pyproject.toml      # Python 3.13ä¾èµ–
â”œâ”€â”€ requirements.txt    # pipå…¼å®¹ä¾èµ–
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore         # Gitå¿½ç•¥è§„åˆ™
â”œâ”€â”€ .dockerignore      # Dockerå¿½ç•¥è§„åˆ™
â”œâ”€â”€ .python-version    # Pythonç‰ˆæœ¬ï¼ˆuvï¼‰
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ æ ¸å¿ƒå‘½ä»¤

```bash
make test-local      # æœ¬åœ°éªŒè¯ï¼ˆDockeræ„å»ºå‰çš„é¢„æ£€ï¼‰
make docker-build    # æ„å»ºé•œåƒï¼ˆè‡ªåŠ¨åŠ è½½ä»£ç†é…ç½®ï¼‰
make deploy-to-kind  # ä¸€é”®éƒ¨ç½²åˆ° Kind é›†ç¾¤
make helm-upgrade    # æ›´æ–°éƒ¨ç½²ï¼ˆä½¿ç”¨ç‰ˆæœ¬åŒ–é•œåƒï¼‰
```

## âš™ï¸ ä»£ç†é…ç½®

å¦‚æœéœ€è¦ä»£ç†ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env`ï¼š
```bash
HTTP_PROXY=http://your-proxy:port
HTTPS_PROXY=http://your-proxy:port
NO_PROXY=localhost,127.0.0.1,nats
```

## ğŸ”§ å…³é”®ç‰¹æ€§

âœ… **é¢„éªŒè¯æœºåˆ¶** - `test-local` åœ¨æ„å»ºå‰æ•è·é”™è¯¯
âœ… **ç‰ˆæœ¬åŒ–éƒ¨ç½²** - ä½¿ç”¨æ—¶é—´æˆ³ç‰ˆæœ¬ï¼Œé¿å… ImagePullBackOff
âœ… **ä»£ç†è‡ªåŠ¨é…ç½®** - ä»æ ¹ç›®å½• `.env` åŠ è½½
âœ… **å¥åº·æ£€æŸ¥ç®¡ç†** - é»˜è®¤ç¦ç”¨ï¼Œé¿å…æ— ç«¯ç‚¹æ—¶çš„é‡å¯
âœ… **å®Œæ•´ Helm æ¨¡æ¿** - åŒ…å«æ‰€æœ‰å¿…è¦çš„è¾…åŠ©å‡½æ•°

## ğŸ“ å¸¸è§é—®é¢˜

### Pod çŠ¶æ€ ImagePullBackOff
**åŸå› **ï¼šä½¿ç”¨äº†ä¸å­˜åœ¨çš„ 'latest' æ ‡ç­¾
**è§£å†³**ï¼šæ¨¡æ¿å·²ä¿®å¤ï¼Œè‡ªåŠ¨ä½¿ç”¨ç‰ˆæœ¬åŒ–é•œåƒ

### Pod çŠ¶æ€ CrashLoopBackOff
**åŸå› **ï¼šå¥åº·æ£€æŸ¥å¤±è´¥æˆ–ä»£ç é”™è¯¯
**è§£å†³**ï¼š
1. è¿è¡Œ `make test-local` æ£€æŸ¥ä»£ç 
2. å¥åº·æ£€æŸ¥å·²é»˜è®¤ç¦ç”¨

### Docker æ„å»ºå¤±è´¥ï¼ˆä»£ç†ç¯å¢ƒï¼‰
**åŸå› **ï¼šæœªé…ç½®ä»£ç†
**è§£å†³**ï¼šåœ¨æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶é…ç½®ä»£ç†

## ğŸ¯ è®¾è®¡ç†å¿µ

- **6å¤©å¼€å‘å‘¨æœŸ** - ä»æƒ³æ³•åˆ°ç”Ÿäº§éƒ¨ç½²
- **å¼€ç®±å³ç”¨** - ç”Ÿæˆçš„ä»£ç å¯ç›´æ¥è¿è¡Œ
- **ç”Ÿäº§å°±ç»ª** - åŒ…å«æ‰€æœ‰ DevOps æœ€ä½³å®è·µ
- **DDDæ¶æ„** - ä¼ä¸šçº§å…­è¾¹å½¢æ¶æ„

## ğŸ“Š CLI å·¥å…·

```bash
aegis-bootstrap   # åˆ›å»ºæ–°é¡¹ç›®
aegis-validate    # éªŒè¯é…ç½®
aegis-quickstart  # äº¤äº’å¼å‘å¯¼
```

## ğŸ’¡ å¼€å‘ç»éªŒæ€»ç»“

### JSON åºåˆ—åŒ–å¤„ç†
**é—®é¢˜**ï¼šåœ¨ echo-service-ddd ä¸­å‘ç°é‡å¤å®ç°äº† datetime åºåˆ—åŒ–
**è§£å†³**ï¼šä½¿ç”¨ SDK æä¾›çš„ `aegis_sdk.infrastructure.serialization.serialize_dict`
**æ•™è®­**ï¼šé¿å…åœ¨æœåŠ¡å±‚é‡å¤å®ç° SDK å·²æä¾›çš„åº•å±‚åŠŸèƒ½

### Task 6 éªŒè¯æˆåŠŸ
- âœ… Kubernetes éƒ¨ç½²é…ç½®å®Œæ•´å¯ç”¨
- âœ… Helm charts ç»“æ„æ­£ç¡®ï¼Œæ”¯æŒå¤šç¯å¢ƒ
- âœ… æ‰€æœ‰ RPC ç«¯ç‚¹æµ‹è¯•é€šè¿‡
- âœ… ä½¿ç”¨ SDK åºåˆ—åŒ–å·¥å…·åï¼Œdatetime å¤„ç†æ­£å¸¸

---

**ç‰ˆæœ¬**: 0.1.0 | **æœ€åä¼˜åŒ–**: 2025-08-11
